/*! cubesviewer 24-04-2016 */
function cubesviewerController(){this.options={cubesUrl:null,cubesLang:null,pagingOptions:[15,30,100,250],datepickerShowWeek:!0,datepickerFirstDay:1,tableResizeHackMinWidth:350,jsonRequestType:"json"},this.cubesserver=null,this._alerts=null,this.alerts=[],this.alert=function(a){alert("CubesViewer "+this.version+"\n\n"+a)},this.refresh=function(){$(document).trigger("cubesviewerRefresh")},this.cubesAjaxHandler=function(a){return cubesviewer.cubesRequest(a.url,a.data||[],a.success)},this.getView=function(a){var b=a.toString();return b=0===b.indexOf("view")?b:"view"+b,b="#"===b[0]?b:"#"+b,$(b+" .cv-gui-viewcontent").data("cubesviewer-view")},this.cubesRequest=function(a,b,c){"/"==a.charAt(0)&&(a=this.options.cubesUrl+a);var d=$.get(a,b,this._cubesRequestCallback(c),cubesviewer.options.jsonRequestType);return d.fail(cubesviewer.defaultRequestErrorHandler),d},this._cubesRequestCallback=function(a){return function(b,c){a(b)}},this.defaultRequestErrorHandler=function(a,b,c){401==a.status?cubesviewer.alert("Unauthorized."):403==a.status?cubesviewer.alert("Forbidden."):400==a.status?cubesviewer.alert($.parseJSON(a.responseText).message):(console.debug(a),cubesviewer.showInfoMessage("CubesViewer: An error occurred while accessing the data server.\n\nPlease try again or contact the application administrator if the problem persists.\n"))},this.changeCubesLang=function(a){this.options.cubesLang=""==a?null:a,this.refresh()},this.showInfoMessage=function(a,b){null==this._alerts&&(this._alerts=new Ractive({el:$("body")[0],append:!0,template:cvtemplates.alerts,partials:cvtemplates,data:{cv:this}})),void 0==b&&(b=5e3),this.alerts.push({text:a}),this._alerts.reset({cv:this})}}(function(){var a={};a.map=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c},a.filter=function(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&c.push(a[d]);return c},a.find=function(a,b){var c;if("[object Array]"===Object.prototype.toString.call(a)){for(c=0;c<a.length;c++)if(b(a[c]))return a[c]}else for(c in a)if(b(a[c]))return a[c];return null},a.indexOf=function(a,b){var c;if("[object Array]"===Object.prototype.toString.call(a)){for(c=0;c<a.length;c++)if(b(a[c]))return c}else for(c in a)if(b(a[c]))return c;return-1},a.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)},a.isString=function(a){return"[object String]"===Object.prototype.toString.call(a)};var b=this,c={};c.Server=function(a){a?this.ajaxRequest=a:this.ajaxRequest=$.ajax,this._cube_list=[],this._cubes={}},c.Server.prototype.cubeinfo=function(a){if(cubeinfos=$.grep(this._cube_list,function(b){return b.name==a}),1!=cubeinfos.length)throw"Found "+cubeinfos.length+" cubes with name '"+a+"' in the cube list";return cubeinfos[0]},c.Server.prototype.ajaxRequest=function(a){throw"Must implement ajaxRequest for server to process jquery-style $.ajax settings object"},c.Server.prototype.query=function(a,b,c,d,e,f){var g={dataType:"json",type:"GET"};return b.hasOwnProperty("name")?cube_name=b.name:cube_name=b,g.url=this.url+"cube/"+cube_name+"/"+a,g.data=c,c&&c.cut&&(g.data.cut=g.data.cut.toString()),c&&c.drilldown&&(g.data.drilldown=g.data.drilldown.toString()),g.success=function(a){d(a)},g.error=function(a){e&&e(a)},g.complete=function(a){f&&f(a)},this.ajaxRequest(g)},c.Server.prototype.connect=function(a,b,c){var d=this;d.url=d._normalize_url(a);var e={dataType:"json",type:"GET"};e.url=d.url+"info",e.success=function(a,e,f){d.server_version=a.cubes_version,d.cubes_version=a.cubes_version,d.api_version=a.api_version,d.info=a,d.load_cube_list(b,c)},e.error=function(a,b,d){c&&c(a)},this.ajaxRequest(e)},c.Server.prototype._normalize_url=function(a){return"/"!=a[a.length-1]?a+"/":a},c.Server.prototype.load_cube_list=function(a,b){var c=this,d={dataType:"json",type:"GET"};return d.url=c.url+"cubes",d.success=function(b,d,e){c._cube_list=b,a&&a(c._cube_list)},d.error=function(a,c,d){b&&b(a)},this.ajaxRequest(d)},c.Server.prototype.get_cube=function(a,b,d){var e=this;if(a in this._cubes&&b)return b(this._cubes[a]),null;var f={dataType:"json",type:"GET"};return f.url=e.url+"cube/"+encodeURI(a)+"/model",f.success=function(d,f,g){var h=new c.Cube(d);e._cubes[a]=h,b&&b(h)},f.error=function(a,b,c){d&&d(a)},this.ajaxRequest(f)},c.Cube=function(b){this.name=b.name,!b.label||(this.label=b.label),!b.description||(this.description=b.description),!b.key||(this.key=b.key),!b.info||(this.info=b.info),!b.category||(this.category=b.category),!b.features||(this.features=b.features),this.measures=a.map(b.measures||[],function(a){return new c.Measure(a)}),this.aggregates=a.map(b.aggregates||[],function(a){return new c.MeasureAggregate(a)}),this.details=a.map(b.details||[],function(a){return new c.Attribute(a)}),this.dimensions=a.map(b.dimensions||[],function(a){return new c.Dimension(a)})},c.Cube.prototype.dimension=function(b){return a.isObject(b)?b:a.find(this.dimensions,function(a){return a.name===b})},c.Dimension=function(a){var b,d=this;if(d.name=a.name,!a.label||(d.label=a.label),!a.description||(d.description=a.description),!a.default_hierarchy_name||(d.default_hierarchy_name=a.default_hierarchy_name),!a.info||(d.info=a.info),!a.role||(d.role=a.role),!a.cardinality||(d.cardinality=a.cardinality),!a.nonadditive||(d.nonadditive=a.nonadditive),d.levels=[],a.levels)for(b in a.levels){var e=new c.Level(d.name,a.levels[b]);d.levels.push(e)}if(this.hierarchies={},a.hierarchies)for(b in a.hierarchies){var f=new c.Hierarchy(a.hierarchies[b],this);d.hierarchies[f.name]=f}!d.default_hierarchy_name&&a.hierarchies&&a.hierarchies.length>0&&(d.default_hierarchy_name=a.hierarchies[0].name)},c.Dimension.prototype.hierarchy=function(b){return a.isObject(b)?b:b?this.hierarchies[b]:this.hierarchies[this.default_hierarchy_name]},c.Dimension.prototype.level=function(b){return a.isObject(b)?b:a.find(this.levels,function(a){return a.name==b})},c.Dimension.prototype.toString=function(a){return this.name},c.Dimension.prototype.display_label=function(){return this.label||this.name},c.Dimension.prototype.hierarchy=function(b){return a.isObject(b)?b:null!=b?this.hierarchies[b]:this.hierarchies[this.default_hierarchy_name]},c.Hierarchy=function(a,b){this.parse(a,b)},c.Hierarchy.prototype.parse=function(b,c){var d=this;d.name=b.name,!b.label||(d.label=b.label),!b.description||(d.description=b.description),!b.info||(d.info=b.info);var e=b.levels||[];d.levels=a.map(e,function(a){return c.level(a)})},c.Hierarchy.prototype.toString=function(){return c.HIERARCHY_PREFIX_CHAR+this.name},c.Hierarchy.prototype.display_label=function(){return this.label||this.name},c.Level=function(a,b){this.parse(a,b)},c.Level.prototype.parse=function(a,b){var d,e=this;if(e.dimension_name=a,e.name=b.name,!b.label||(e.label=b.label),!b.description||(e.description=b.description),!b.info||(e.info=b.info),e._key=b.key,e._label_attribute=b.label_attribute,e._order_attribute=b.order_attribute,!b.role||(e.role=b.role),!b.cardinality||(e.cardinality=b.cardinality),e.nonadditive=b.nonadditive,e.attributes=[],b.attributes)for(d in b.attributes){var f=new c.Attribute(b.attributes[d]);e.attributes.push(f)}},c.Level.prototype.key=function(){var b=this._key;return the_attr=a.find(this.attributes,function(a){return a.name===b}),the_attr||this.attributes[0]},c.Level.prototype.label_attribute=function(){var b=null;if(this._label_attribute){var c=this._label_attribute;b=a.find(this.attributes,function(a){return a.name===c})}return b||this.key()},c.Level.prototype.order_attribute=function(){var b=null;return this._order_attribute&&(b=a.find(this.attributes,function(a){a.name===this.__order_attribute})),b||this.key()},c.Level.prototype.toString=function(){return this.name},c.Level.prototype.display_name=function(){return this.label||this.name},c.Level.prototype.full_name=function(){return this.dimension_name+c.ATTRIBUTE_STRING_SEPARATOR_CHAR+this.name},c.Level.prototype.full_name_for_drilldown=function(){return this.dimension_name+c.DIMENSION_STRING_SEPARATOR_CHAR+this.name},c.Attribute=function(a){this.ref=a.ref,this.name=a.name,this.label=a.label,this.order=a.order,this.info=a.info||{},this.description=a.description,this.format=a.format,this.missing_value=a.missing_value,this.locales=a.locales},c.Measure=function(a){this.ref=a.ref,this.name=a.name,this.label=a.label,this.order=a.order,this.info=a.info||{},this.description=a.description,this.format=a.format,this.missing_value=a.missing_value,this.nonadditive=a.nonadditive,a.aggregates&&(this.aggregates=a.aggregates)},c.MeasureAggregate=function(a){this.ref=a.ref,this.name=a.name,this.label=a.label,this.order=a.order,this.locales=a.locales,this.info=a.info||{},this.description=a.description,this.format=a.format,this.missing_value=a.missing_value,this.nonadditive=a.nonadditive,this["function"]=a["function"],this.measure=a.measure},c.Browser=function(a,b){this.cube=b,this.server=a},c.Browser.prototype.full_cube=function(){return new c.Cell(this.cube)},c.Browser.prototype.aggregate=function(a,b){a||(a={});var c={};return a.cut&&(c.cut=a.cut.toString()),a.measure&&(c.measure=a.measure.toString()),a.drilldown&&(c.drilldown=a.drilldown.toString()),a.split&&(c.split=a.split.toString()),a.order&&(c.order=a.order.toString()),a.page&&(c.page=a.page),a.pagesize&&(c.pagesize=a.pagesize),this.server.query("aggregate",this.cube,a,b)},c.Browser.prototype.facts=function(a,b){a||(a={});var c={};return a.cut&&(c.cut=a.cut.toString()),a.order&&(c.order=a.order.toString()),a.page&&(c.page=a.page),a.pagesize&&(c.pagesize=a.pagesize),this.server.query("facts",this.cube,a,b)},c.Drilldown=function(b,c,d){if(!a.isObject(b))throw"Drilldown requires a Dimension object as first argument";if(this.dimension=b,this.hierarchy=b.hierarchy(c),this.level=b.level(d)||this.hierarchy.levels[0],!this.hierarchy)throw"Drilldown cannot recognize hierarchy "+c+" for dimension "+b;if(!this.level)throw"Drilldown cannot recognize level "+d+" for dimension "+b},c.Drilldown.prototype.toString=function(){return""+this.dimension+this.hierarchy+c.DIMENSION_STRING_SEPARATOR_CHAR+this.level},c.Drilldown.prototype.keysInResultCell=function(){var b=this,c=!1,d=a.filter(b.hierarchy.levels,function(a){return a.key()===b.level.key()&&(c=!0)||!c});return a.map(d,function(a){return a.key().ref})},c.Drilldown.prototype.labelsInResultCell=function(){var b=this,c=!1,d=a.filter(b.hierarchy.levels,function(a){return a.key()===b.level.key()&&(c=!0)||!c});return a.map(d,function(a){return a.label_attribute().ref})},c.Cell=function(b,c){this.cube=b,this.cuts=a.map(c||[],function(a){return a})},c.Cell.prototype.slice=function(a){for(var b=[],d=!1,e=0;e<this.cuts.length;e++){var f=this.cuts[e];f.dimension==a.dimension?(b.push(a),d=!0):b.push(f)}d||b.push(a);var g=new c.Cell(this.cube,b);return g},c.Cell.prototype.toString=function(){return a.map(this.cuts||[],function(a){return a.toString()}).join(c.CUT_STRING_SEPARATOR_CHAR)},c.Cell.prototype.cut_for_dimension=function(b){return a.find(this.cuts,function(a){return a.dimension.name==b})},c.PointCut=function(a,b,c,d){this.type="point",this.dimension=a,this.hierarchy=a.hierarchy(b),this.path=c,this.invert=!!d},c.PointCut.prototype.toString=function(){var a=c.string_from_path(this.path);return(this.invert?c.CUT_INVERSION_CHAR:"")+this.dimension+(this.hierarchy||"")+c.DIMENSION_STRING_SEPARATOR_CHAR+a},c.SetCut=function(a,b,c,d){this.type="set",this.dimension=a,this.hierarchy=a.hierarchy(b),this.paths=c,this.invert=!!d},c.SetCut.prototype.toString=function(){var b=a.map(this.paths,c.string_from_path).join(c.SET_CUT_SEPARATOR_CHAR);return(this.invert?c.CUT_INVERSION_CHAR:"")+this.dimension+(this.hierarchy||"")+c.DIMENSION_STRING_SEPARATOR_CHAR+b},c.RangeCut=function(a,b,c,d,e){if(this.type="range",this.dimension=a,this.hierarchy=a.hierarchy(b),null===c&&null===d)throw"Either from_path or to_path must be defined for RangeCut";this.from_path=c,this.to_path=d,this.invert=!!e},c.RangeCut.prototype.toString=function(){var a=c.string_from_path(this.from_path)+c.RANGE_CUT_SEPARATOR_CHAR+c.string_from_path(this.to_path);return(this.invert?c.CUT_INVERSION_CHAR:"")+this.dimension+(this.hierarchy||"")+c.DIMENSION_STRING_SEPARATOR_CHAR+a},c.CUT_INVERSION_CHAR="!",c.CUT_STRING_SEPARATOR_CHAR="|",c.DIMENSION_STRING_SEPARATOR_CHAR=":",c.ATTRIBUTE_STRING_SEPARATOR_CHAR=".",c.HIERARCHY_PREFIX_CHAR="@",c.PATH_STRING_SEPARATOR_CHAR=",",c.RANGE_CUT_SEPARATOR_CHAR="-",c.SET_CUT_SEPARATOR_CHAR=";",c.CUT_STRING_SEPARATOR=/\|/g,c.DIMENSION_STRING_SEPARATOR=/:/g,c.PATH_STRING_SEPARATOR=/,/g,c.RANGE_CUT_SEPARATOR=/-/g,c.SET_CUT_SEPARATOR=/;/g,c.PATH_PART_ESCAPE_PATTERN=/([\\!|:;,-])/g,c.PATH_PART_UNESCAPE_PATTERN=/\\([\\!|:;,-])/g,c.CUT_PARSE_REGEXP=new RegExp("^("+c.CUT_INVERSION_CHAR+"?)(\\w+)(?:"+c.HIERARCHY_PREFIX_CHAR+"(\\w+))?"+c.DIMENSION_STRING_SEPARATOR_CHAR+"(.*)$"),c.DRILLDOWN_PARSE_REGEXP=new RegExp("^(\\w+)(?:"+c.HIERARCHY_PREFIX_CHAR+"(\\w+))?(?:"+c.DIMENSION_STRING_SEPARATOR_CHAR+"(\\w+))?$"),c.NULL_PART_STRING="__null__",c.SPLIT_DIMENSION_STRING="__within_split__",c.SPLIT_DIMENSION=new c.Dimension({name:c.SPLIT_DIMENSION_STRING,label:"Matches Filters",hierarchies:[{name:"default",levels:[c.SPLIT_DIMENSION_STRING]}],levels:[{name:c.SPLIT_DIMENSION_STRING,attributes:[{name:c.SPLIT_DIMENSION_STRING}],label:"Matches Filters"}]}),c._split_with_negative_lookbehind=function(a,b,c){for(var d,e=a,f=[];null!=(d=b.exec(e));)e.substr(d.index-c.length,c.length)!=c&&(f.push(e.substring(0,d.index)),e=e.substring(Math.min(d.index+d[0].length,e.length)),b.lastIndex=0);return f.push(e),f},c._escape_path_part=function(a){return null==a?c.NULL_PART_STRING:a.toString().replace(c.PATH_PART_ESCAPE_PATTERN,function(a,b){return"\\"+b})},c._unescape_path_part=function(a){return a===c.NULL_PART_STRING?null:a.replace(c.PATH_PART_UNESCAPE_PATTERN,function(a,b){return b})},c.string_from_path=function(b){var d=a.map(b||[],function(a){return c._escape_path_part(a)}).join(c.PATH_STRING_SEPARATOR_CHAR);return d},c.path_from_string=function(b){var d=c._split_with_negative_lookbehind(b,c.PATH_STRING_SEPARATOR,"\\"),e=a.map(d||[],function(a){return c._unescape_path_part(a)});return e},c.cut_from_string=function(b,d){var e=c.CUT_PARSE_REGEXP.exec(d);if(!e)return null;var f=!!e[1],g=e[2],h=e[3]||null,i=e[4],j=b.dimension(g),k=c._split_with_negative_lookbehind(i,c.SET_CUT_SEPARATOR,"\\");if(k.length>1)return new c.SetCut(j,h,a.map(k,function(a){return c.path_from_string(a)}),f);if(k=c._split_with_negative_lookbehind(i,c.RANGE_CUT_SEPARATOR,"\\"),2==k.length){var l=k[0]?c.path_from_string(k[0]):null,m=k[1]?c.path_from_string(k[1]):null;return new c.RangeCut(j,h,l,m,f)}return new c.PointCut(j,h,c.path_from_string(i),f)},c.cuts_from_string=function(b,d){var e=c._split_with_negative_lookbehind(d,c.CUT_STRING_SEPARATOR,"\\");return a.map(e||[],function(a){return c.cut_from_string(b,a)})},c.cell_from_string=function(a,b){return new c.Cell(a,c.cuts_from_string(a,b))},c.drilldown_from_string=function(a,b){var d=c.DRILLDOWN_PARSE_REGEXP.exec(b);if(!d)return null;var e=d[1],f=d[2]||null,g=d[3]||null,h=a.dimension(e);if(!h){if(e!==c.SPLIT_DIMENSION_STRING)return null;h=c.SPLIT_DIMENSION}return new c.Drilldown(h,f,g)},c.drilldowns_from_string=function(b,d){var e=c._split_with_negative_lookbehind(d,c.CUT_STRING_SEPARATOR,"\\");return a.map(e||[],function(a){return c.drilldown_from_string(b,a)})},c.drilldowns_to_string=function(b){return a.map(b,function(a){return a.toString()}).join(c.CUT_STRING_SEPARATOR_CHAR)},b.cubes=c}).call(this),cubes.Dimension.prototype.hierarchies_count=function(){var a=0;for(hiename in this.hierarchies)this.hierarchies.hasOwnProperty(hiename)&&a++;return a},cubes.Dimension.prototype.default_hierarchy=function(){return this.hierarchies[this.default_hierarchy_name]},cubes.Cube.prototype.cvdim_dim=function(a){var b=a;return a.indexOf("@")>0?b=a.split("@")[0]:a.indexOf(":")>0&&(b=a.split(":")[0]),this.dimension(b)},cubes.Cube.prototype.cvdim_parts=function(a){var b=this.cvdim_dim(a),c=b.default_hierarchy();if(a.indexOf("@")>0){var d=a.split("@")[1].split(":")[0];c=b.hierarchy(d)}var e=null;if(a.indexOf(":")>0){var f=a.split(":")[1];e=b.level(f)}else e=b.level(c.levels[0]);for(var g=null,h=0;h<c.levels.length;h++)if(e.name==c.levels[h]){g=h+1;break}return{dimension:b,level:e,depth:g,hierarchy:c,label:b.label+("default"!=c.name?" / "+c.label:"")+(c.levels.length>1?": "+e.label:""),labelNoLevel:b.label+("default"!=c.name?" / "+c.label:""),fullDrilldownValue:b.name+("default"!=c.name?"@"+c.name:"")+":"+e.name}},cubes.Level.prototype.readCell=function(a){if(!(this.key().ref in a))return null;var b={};return b.key=a[this.key().ref],b.label=a[this.label_attribute().ref],b.info={},$(this.attributes).each(function(c,d){b.info[d.ref]=a[d.ref]}),b},cubes.Hierarchy.prototype.readCell=function(a,b){for(var c=[],d=0;d<this.levels.length;d++){var e=this.levels[d];if(info=e.readCell(a),null!=info&&c.push(info),void 0!=b&&null!=b&&b.name==e.name)break}return c},angular.module("cv.cubes",[]),angular.module("cv.cubes").service("cubesService",["$rootScope","cvOptions",function(a,b){var c=this;this.cubesserver=null,this.initialize=function(){},this.connect=function(){this.cubesserver=new cubes.Server(cubesviewer.cubesAjaxHandler),console.debug("Cubes client connecting to: "+b.cubesUrl),this.cubesserver.connect(b.cubesUrl,function(){console.debug("Cubes client initialized (server version: "+c.cubesserver.server_version+")"),a.$apply()})},this.initialize()}]),angular.module("cv",["cv.cubes"]),angular.module("cv").constant("angularMomentConfig",{}),angular.module("cv").run(["$timeout","cvOptions","cubesService",function(a,b,c){var d={cubesUrl:null,cubesLang:null,pagingOptions:[15,30,100,250],datepickerShowWeek:!0,datepickerFirstDay:1,tableResizeHackMinWidth:350,jsonRequestType:"json"};$.extend(d,b),$.extend(b,d),c.connect()}]);var cubesviewer={version:"2.0.0-devel",_configure:function(a){angular.module("cv").constant("cvOptions",a)},init:function(a){this._configure(a),angular.element(document).ready(function(){angular.bootstrap(document,["cv"])})}};angular.module("cv.studio",["ui.bootstrap","cv","cv.studio"]),angular.module("cv.studio").controller("CubesViewerStudioController",["$rootScope","$scope","cvOptions","cubesService",function(a,b,c,d){b.cvVersion=cubesviewer.version,b.cvOptions=c,b.cubesService=d,this.views=[],this.lastViewId=0,b.closeView=function(a){for(var b=0;b<this.views.length&&this.views[b].id!=a.id;b++);$("#"+a.id).remove(),this.views.splice(b,1),cubesviewer.views.destroyView(a)},b.addViewCube=function(a){this.lastViewId++;var b="view"+this.lastViewId,c=this.createContainer(b),d=cubesviewer.cubesserver.cubeinfo(a),e=this.cubesviewer.views.createView(b,$(".cv-gui-viewcontent",c),"cube",{cubename:a,name:"Cube "+d.label});return this.views.push(e),$(c).find(".cv-gui-closeview").click(function(){return cubesviewer.gui.closeView(e),!1}),e},b.addViewObject=function(a){this.lastViewId++;var b="view"+this.lastViewId,c=this.createContainer(b),d=this.cubesviewer.views.createView(b,$(".cv-gui-viewcontent",c),"cube",a);return this.views.push(d),$(c).find(".cv-gui-closeview").click(function(){return cubesviewer.gui.closeView(d),!1}),d},this.createContainer=function(a){return $("#"+a)},this.onViewDraw=function(a,b){var c=$(b.container).parents(".cv-gui-cubesview");$(".cv-gui-container-name",c).empty().text(b.params.name),b.cubesviewer.gui.drawMenu(b)},this.drawMenu=function(a){$(a.container).find(".cv-view-toolbar").append('<button class="panelbutton" title="Panel">Panel</button>'),$(a.container).find(".cv-view-viewmenu").append('<ul class="cv-view-menu cv-view-menu-panel" style="float: right; width: 180px;"></ul>'),$(a.container).find(".panelbutton").button();var b=$(".cv-view-menu-panel",$(a.container));b.append('<li><a class="cv-gui-cloneview" href="#"><span class="ui-icon ui-icon-copy"></span>Clone</a></li><li><a class="cv-gui-renameview" href="#"><span class="ui-icon ui-icon-pencil"></span>Rename...</a></li><div></div><li><a class="cv-gui-closeview" href="#"><span class="ui-icon ui-icon-close"></span>Close</a></li>'),a.cubesviewer.views.cube._initMenu(a,".panelbutton",".cv-view-menu-panel"),$(a.container).find(".cv-gui-closeview").unbind("click").click(function(){return cubesviewer.gui.closeView(a),!1}),$(a.container).find(".cv-gui-renameview").unbind("click").click(function(){return cubesviewer.gui.renameView(a),!1}),$("#"+a.id).find(".cv-gui-container-name").unbind("dblclick").dblclick(function(){return cubesviewer.gui.renameView(a),!1}),$(a.container).find(".cv-gui-cloneview").unbind("click").click(function(){return cubesviewer.gui.cloneView(a),!1})},this.renameView=function(a){var b=prompt("Enter new view name:",a.params.name);null!=b&&""!=b&&(a.params.name=b,cubesviewer.views.redrawView(a))},this.cloneView=function(a){viewobject=$.parseJSON(a.cubesviewer.views.serialize(a)),viewobject.name="Clone of "+viewobject.name;var a=this.addViewObject(viewobject);a.savedId=0,a.owner=this.options.user,a.shared=!1,this.cubesviewer.views.redrawView(a)},this.onCubesViewerInitialized=function(){cubesviewer.gui.drawCubesList()},this.drawCubesList=function(){$(".cv-gui-cubeslist-menu",$(cubesviewer.gui.options.container)).find(".cv-gui-addviewcube").click(function(){cubesviewer.gui.addViewCube($(this).attr("data-cubename"));return!1}),$(cubesviewer.gui.views).each(function(a,b){b.cubesviewer.views.redrawView(b)})},this.onGuiDraw=function(a,b){$("[data-submenu]",b.options.container).submenupicker()}}]),angular.module("cv.studio").config(["$compileProvider",function(a){}]),angular.module("cv.studio").run(["$rootScope","$compile","$controller","$http","$templateCache","cvOptions",function(a,b,c,d,e,f){console.debug("Bootstrapping CubesViewer Studio.");var g={container:null,user:null,showAbout:!0};$.extend(g,f),$.extend(f,g),d.get("studio/main.html",{cache:e}).then(function(a){var c=angular.element(f.container).scope();c.$new();$(f.container).html(a.data),b($(f.container).contents())(c)})}]),cubesviewer.studio={_configure:function(a){cubesviewer._configure(a)},init:function(a){this._configure(a),angular.element(document).ready(function(){angular.bootstrap(a.container,["cv.studio"])})}},angular.module("cv").run(["$templateCache",function(a){"use strict";a.put("alerts/alerts.html",'<div class="cv-bootstrap cv-alerts">\n    <div style="min-width: 260px; width: 300px; z-index: 1000;" >\n\n        {{# cv.alerts }}\n        <div class="alert alert-warning alert-dismissable" style="margin-bottom: 5px;">\n            <button type="button" class="close" data-dismiss="alert" aria-hidden="true"><i class="fa fa-fw fa-close"></i></button>\n            <i class="fa fa-bell"></i> {{ text }}\n        </div>\n        {{/ cv.alerts }}\n\n    </div>\n</div>\n'),a.put("studio/about.html",'<div class="modal fade" id="cvAboutModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"><i class="fa fa-fw fa-close"></i></span></button>\n        <h4 class="modal-title" id="myModalLabel"><i class="fa fa-cube"></i> CubesViewer</h4>\n      </div>\n      <div class="modal-body">\n\n            <p><a href="http://jjmontesl.github.io/cubesviewer/">CubesViewer</a> is a visual, web-based tool application for exploring and analyzing\n            OLAP databases served by the <a href="http://cubes.databrewery.org/">Cubes OLAP Framework</a>.</p>\n            <hr />\n\n            <p>Version {{ cvVersion }}<br />\n            <a href="https://github.com/jjmontesl/cubesviewer/" target="_blank">https://github.com/jjmontesl/cubesviewer/</a></p>\n\n            <p>by José Juan Montes and others (see AUTHORS)<br />\n            2012 - 2016</p>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n'),a.put("studio/container.html",'<div id="{{viewId}}" class="cv-bootstrap cv-gui-viewcontainer">\n\n    <div class="panel panel-primary">\n        <div class="panel-heading" style="ver">\n\n            <span class="cv-gui-title">Test {{name}}</span>\n\n            <button type="button" class="btn btn-primary btn-xs pull-right" style="margin-left: 10px;"><i class="fa fa-fw fa-close"></i></button>\n            <button type="button" class="btn btn-primary btn-xs pull-right" style="margin-left: 10px;"><i class="fa fa-fw fa-caret-up"></i></button>\n\n            <span class="label label-info pull-right cv-gui-container-state">Test2</span>\n\n        </div>\n        <div class="panel-body">\n            <div class="cv-gui-viewcontent" style="overflow: hidden;"></div>\n        </div>\n    </div>\n\n</div>\n'),a.put("studio/main.html",'<div class="cv-bootstrap" ng-controller="CubesViewerStudioController">\n\n    <div class="cv-gui-panel" >\n\n        <div class="dropdown m-b" style="display: inline-block;">\n          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" data-submenu>\n            <i class="fa fa-fw fa-cube"></i> Cubes <span class="caret"></span>\n          </button>\n\n          <ul class="dropdown-menu cv-gui-cubeslist-menu">\n\n            <li ng-repeat="cube in cubesService.cubesserver._cube_list" ng-click="addViewCube(cube.name)"><a>{{ cube.label }}</a></li>\n\n          </ul>\n        </div>\n\n\n        <div class="dropdown m-b" style="display: inline-block;">\n          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" data-submenu>\n            <i class="fa fa-fw fa-wrench"></i> Tools <span class="caret"></span>\n          </button>\n\n          <ul class="dropdown-menu">\n          <li class="dropdown-submenu">\n          <a tabindex="0">Action</a>\n\n          <ul class="dropdown-menu">\n            <li><a tabindex="0">Sub action</a></li>\n            <li class="dropdown-submenu">\n              <a tabindex="0">Another sub action</a>\n\n              <ul class="dropdown-menu">\n                <li><a tabindex="0">Sub action</a></li>\n                <li><a tabindex="0">Another sub action</a></li>\n                <li><a tabindex="0">Something else here</a></li>\n              </ul>\n            </li>\n            <li><a tabindex="0">Something else here</a></li>\n            <li class="disabled"><a tabindex="-1">Disabled action</a></li>\n            <li class="dropdown-submenu">\n              <a tabindex="0">Another action</a>\n\n              <ul class="dropdown-menu">\n                <li><a tabindex="0">Sub action</a></li>\n                <li><a tabindex="0">Another sub action</a></li>\n                <li><a tabindex="0">Something else here</a></li>\n              </ul>\n            </li>\n          </ul>\n        </li>\n        <li class="dropdown-header">Dropdown header</li>\n        <li class="dropdown-submenu">\n          <a tabindex="0">Another action</a>\n\n          <ul class="dropdown-menu">\n            <li><a tabindex="0">Sub action</a></li>\n            <li><a tabindex="0">Another sub action</a></li>\n            <li><a tabindex="0">Something else here</a></li>\n          </ul>\n        </li>\n        <li><a tabindex="0">Something else here</a></li>\n\n        <div class="divider" ng-if="cvOptions.showAbout"></div>\n        <li class="" ng-if="cvOptions.showAbout"><a data-toggle="modal" data-target="#cvAboutModal">About CubesViewer</a></li>\n\n        </ul>\n        </div>\n\n        <div ng-include="\'studio/about.html\'"></div>\n\n    </div>\n\n    <div class="cv-gui-workspace">\n    </div>\n\n</div>\n\n\n'),a.put("views/cube/views_cube.html",'<div class="cv-view-panel">\n\n    <div class="cv-view-viewmenu">\n\n        <div class="panel panel-primary pull-right" style="padding: 3px;">\n\n            <div class="btn-group" role="group" aria-label="...">\n              <button type="button" class="btn btn-primary btn-sm explorebutton"><i class="fa fa-arrow-circle-down"></i></button>\n            </div>\n\n           <div class="dropdown m-b" style="display: inline-block; margin-left: 10px;">\n              <button class="btn btn-primary btn-sm dropdown-toggle drilldownbutton" type="button" data-toggle="dropdown" data-submenu>\n                <i class="fa fa-fw fa-arrow-down"></i> Drilldown <span class="caret"></span>\n              </button>\n\n              <ul class="dropdown-menu dropdown-menu-right cv-view-menu cv-view-menu-drilldown">\n                <li ><a>Test 1</a></li>\n              </ul>\n            </div>\n\n\n            <div class="dropdown m-b" style="display: inline-block;">\n              <button class="btn btn-primary btn-sm dropdown-toggle cutbutton" type="button" data-toggle="dropdown" data-submenu>\n                <i class="fa fa-fw fa-search"></i> Filter <span class="caret"></span>\n              </button>\n\n              <ul class="dropdown-menu dropdown-menu-right cv-view-menu cv-view-menu-cut">\n                <li ><a>Test 1</a></li>\n                <li ><a>Test 3</a></li>\n              </ul>\n            </div>\n\n\n            <div class="dropdown m-b" style="display: inline-block; margin-left: 5px;">\n              <button class="btn btn-primary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" data-submenu>\n                <i class="fa fa-fw fa-file"></i> View <span class="caret"></span>\n              </button>\n\n              <ul class="dropdown-menu dropdown-menu-right cv-view-menu cv-view-menu-view">\n                <li ><a>Test 2</a></li>\n              </ul>\n            </div>\n\n        </div>\n\n    </div>\n\n    <div class="cv-view-viewinfo">\n\n    </div>\n    <div class="clearfix"></div>\n\n    <div class="cv-view-viewdata"></div>\n    <div class="clearfix"></div>\n\n    <div class="cv-view-viewfooter"></div>\n\n</div>\n')}]);